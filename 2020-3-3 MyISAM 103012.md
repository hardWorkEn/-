# MyISAM

MySQL5.5之前默认的存储引擎，由MYD和MYI组成。

+ MYD：存储的数据文件
+ MYI：存储的索引文件

正是由于数据文件与索引文件分开，所以MyISAM是非聚簇索引。

特性：

+ 并发性与表级锁
+ 支持全文检索
+ 支持数据压缩

适用场景：

+ 非事务型应用
+ 只读类应用
+ 空间类应用

# InnoDB

MySQL5.5及以后版本默认存储引擎。MySQL5.6以前默认为系统表空间

系统表空间与独立表空间：

+ 系统表空间无法简单的收缩文件大小
+ 独立表空间可以通过optimize table 收缩系统文件
+ 系统表空间会产生IO瓶颈
+ 独立表空间可以同时向多个文件刷新数据

特性：

+ Innodb是一种事务性存储引擎
+ 完全支持事务的ACID特性
+ Redo Log和Undo Log
+ 支持行级锁

# MyISAM与InnoDB对比

|  对比项  |           MyISAM           |          InnoDB          |
| :------: | :------------------------: | :----------------------: |
|  主外键  |           不支持           |           支持           |
|   事务   |           不支持           |           支持           |
|  行表锁  |            表锁            |           行锁           |
|   缓存   | 只缓存索引，不缓存真实数据 | 不仅缓存索引还要缓存数据 |
|  表空间  |             小             |            大            |
|  关注点  |            性能            |           事务           |
| 默认安装 |             Y              |            Y             |

```
表级锁：开销小，加锁快，不会出现死锁，锁定粒度大，发送锁冲突的概率最小，并发度最低
行级锁：开销大，加锁慢，会出现死锁，锁定粒度小，发送锁冲突的概率大，并发度高
```

![1583142083741](C:\Users\RYQBDYQ\AppData\Roaming\Typora\typora-user-images\1583142083741.png)

# 索引分类

+ 普通索引：即一个索引只包含单个列，一个表可以有多个单列索引
+ 唯一索引：索引列的值必须唯一，但允许有空值
+ 复合索引：即一个索引包含多个列
+ 聚簇索引：并不是一种单独的索引类型，而是一种数据存储方式。

# 执行计划包含的信息

+ id：①id相同的情况下，执行的表顺序由上至下。②id不同的情况下，如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行。③id相同又有不相同的，id相同可以认为是一组，从上往下顺序执行，id值越大的优先级越高，越先执行。

+ select_type：查询的类型，主要用于区分普通查询，联合查询，子查询等

  | 类型         | 描述                                                         |
  | :----------- | ------------------------------------------------------------ |
  | SIMPLE       | 简单的select查询，查询中不包含子查询或者UNION                |
  | PRIMARY      | 查询中若包含任何复杂的子部分，最外层查询则被标记为           |
  | SUBQUERY     | 在select或where列表中包含了子查询                            |
  | DERIVED      | 在from列表中包含的子查询被标记为DERIVED（衍生）MySQL会递归执行这些子查询，把结果放到临时表 |
  | UNION        | 若第二个select出现在union之后，则被标记为union，若union包含在from字句的子查询中，外层select将被标记为DERIVED |
  | UNION RESULT | 从union表获取结果的select                                    |

+ type：是一个访问类型，是较为重要的一个指标，结果值从好到坏依次是

  ```
  system > const > eq_ref > ref > fulltext > ref_or_null > index_merge > unique_subquery > index_subquery > range > index > All
  ```

  `需要记忆的`：system > const > eq_ref > ref > range > index > All

  + system：表只有一行记录（）